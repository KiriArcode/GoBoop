Инструкция по деплою GoBoop (Telegram Mini App)

Основной целевой хостинг для TMA: Vercel. GitHub Pages можно использовать для отдельного web-превью.

Локальная веб-версия для проверки

npm install — Установка зависимостей.
npm run dev — Запуск dev-сервера, приложение доступно на http://localhost:3000
npm run build && npm run start — Production-сборка и запуск локально.

1. Vercel (Рекомендуемый способ для TMA)

1.1. Подключение репозитория

Создайте проект на vercel.com и подключите репозиторий GitHub.

1.2. Переменные окружения (Environment Variables)

Добавьте в настройках проекта Vercel:

| Переменная | Описание |
|------------|----------|
| NEXT_PUBLIC_SUPABASE_URL | Supabase project URL |
| NEXT_PUBLIC_SUPABASE_ANON_KEY | Supabase anonymous key |
| SUPABASE_SERVICE_ROLE_KEY | Supabase service role (для server-side) |
| GOOGLE_CLIENT_ID | Google OAuth Client ID (для Drive) |
| GOOGLE_CLIENT_SECRET | Google OAuth Client Secret |
| TELEGRAM_BOT_TOKEN | Токен бота Telegram |
| AI_API_KEY | Gemini или OpenAI API key |

1.3. Деплой

При push в main ветку Vercel автоматически собирает и деплоит Next.js приложение.

Важные команды:

npm install — Установка зависимостей.
npm run dev — Запуск локального сервера.
npm run build — Сборка проекта (проверка перед деплоем).
npm run start — Запуск production-сборки локально.

2. GitHub Pages (Web-превью)

Статический деплой настроен. Команда:

npm run deploy

Проект публикуется в ветку gh-pages. URL после включения Pages:
https://kiriarcode.github.io/GoBoop/

В настройках репозитория GitHub -> Settings -> Pages выберите source: Deploy from a branch, branch: gh-pages.

3. Webhook для Telegram Bot

Для бота нужен HTTPS-эндпоинт. При деплое на Vercel создайте API route (например app/api/bot/webhook/route.ts) и зарегистрируйте его URL в BotFather как webhook.
